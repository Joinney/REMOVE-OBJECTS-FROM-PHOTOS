import type { NodeishFilesystem } from "@lix-js/fs";
import type raw from "../vendored/isomorphic-git/index.js";
import type { Endpoints } from "@octokit/types";
import type { statusList, OptStatus } from "./git/status-list.js";
export type Author = {
    name?: string;
    email?: string;
    timestamp?: number;
    timezoneOffset?: number;
};
export declare class LixError extends Error {
    response?: {
        status?: number;
    };
}
type StatusArgs = {
    filepaths?: string[];
    filter?: (filepath: string) => boolean;
    sparseFilter?: (entry: {
        filename: string;
        type: "file" | "folder";
    }) => boolean;
    includeStatus?: OptStatus[];
};
export type Repository = {
    [x: string]: any;
    nodeishFs: NodeishFilesystem;
    listRemotes: () => Promise<Awaited<ReturnType<typeof raw.listRemotes>> | undefined>;
    log: (args?: {
        since?: Date;
        depth?: number;
        filepath?: string;
        ref?: string;
    }) => Promise<Awaited<ReturnType<typeof raw.log>>>;
    status: (arg: string) => Promise<string>;
    statusList: (arg?: StatusArgs) => ReturnType<typeof statusList>;
    forkStatus: () => Promise<{
        ahead: number;
        behind: number;
        conflicts: boolean;
    } | {
        error: string;
    }>;
    getOrigin: () => Promise<string | undefined>;
    getCurrentBranch: () => Promise<string | undefined>;
    getBranches: () => Promise<string[] | undefined>;
    errors: Subscribable<LixError[]>;
    getFirstCommitHash: () => Promise<string | undefined>;
    getMeta: () => Promise<{
        name: string;
        isPrivate: boolean;
        isFork: boolean;
        owner: {
            name?: string;
            email?: string;
            login: string;
        };
        permissions: {
            admin: boolean;
            pull: boolean;
            push: boolean;
        };
        parent?: {
            url: string;
            fullName: string;
        };
    } | {
        error: Error;
    }>;
    checkout: (args: {
        branch: string;
    }) => Promise<void>;
    commit: (args: {
        author?: Author;
        message: string;
        include: string[];
    }) => Promise<Awaited<ReturnType<typeof raw.commit>> | undefined>;
    push: () => Promise<Awaited<ReturnType<typeof raw.push>> | undefined>;
    pull: (args: {
        author: Author;
        fastForward: boolean;
        singleBranch: true;
    }) => Promise<any>;
    mergeUpstream: (args?: {
        branch?: string;
    }) => Promise<Endpoints["POST /repos/{owner}/{repo}/merge-upstream"]["response"]["data"] | {
        error: any;
    }>;
    createFork: () => Promise<Endpoints["POST /repos/{owner}/{repo}/forks"]["response"]>;
};
export type Subscribable<Value> = {
    (): Value;
    subscribe: (callback: (value: Value) => void) => void;
};
export {};
//# sourceMappingURL=api.d.ts.map